{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///E:/magang/afterSchola/projek/lms-afterschola/src/app/login/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n  Paper,\r\n  TextInput,\r\n  PasswordInput,\r\n  Button,\r\n  Title,\r\n  Text,\r\n  Anchor,\r\n  Container,\r\n  Stack,\r\n  Alert,\r\n  Checkbox,\r\n} from \"@mantine/core\";\r\nimport { IconAlertCircle, IconMail, IconLock } from \"@tabler/icons-react\";\r\nimport { LoginCredentials } from \"../../types\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { z } from \"zod\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { useAuth } from \"../../hooks/useAuth\";\r\n\r\nconst schema = z.object({\r\n  email: z.string().email({ message: \"Email tidak valid\" }),\r\n  password: z.string().min(1, { message: \"Password harus diisi\" }),\r\n  rememberMe: z.boolean().optional(),\r\n});\r\n\r\nexport default function LoginPage() {\r\n  return <LoginForm />;\r\n}\r\n\r\nexport function LoginForm() {\r\n  const router = useRouter();\r\n  const { login, loading } = useAuth();\r\n  const [loginError, setLoginError] = useState<string | null>(null);\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm<LoginCredentials & { rememberMe?: boolean }>({\r\n    resolver: zodResolver(schema),\r\n    defaultValues: { email: \"\", password: \"\", rememberMe: false },\r\n  });\r\n\r\n  const onSubmit = async (data: LoginCredentials) => {\r\n    try {\r\n      setLoginError(null);\r\n      const result = await login(data);\r\n      if (result.success) {\r\n        // Login berhasil, redirect ke dashboard berdasarkan role\r\n        const userRole = localStorage.getItem(\"userRole\");\r\n        if (userRole === \"admin\") {\r\n          router.push(\"/admin/dashboard\");\r\n        } else if (userRole === \"instructor\") {\r\n          router.push(\"/instructor/dashboard\");\r\n        } else if (userRole === \"user\") {\r\n          router.push(\"/user/dashboard\");\r\n        } else {\r\n          // Fallback jika role tidak ditemukan\r\n          router.push(\"/\");\r\n        }\r\n      } else {\r\n        setLoginError(result.error || \"Login gagal\");\r\n      }\r\n    } catch (err: unknown) {\r\n      setLoginError(err instanceof Error ? err.message : \"Login gagal\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container size={420} my={40}>\r\n      <Title ta=\"center\" className=\"text-gradient\">\r\n        Selamat Datang\r\n      </Title>\r\n      <Text c=\"dimmed\" size=\"sm\" ta=\"center\" mt={5}>\r\n        Belum punya akun?{\" \"}\r\n        <Anchor size=\"sm\" onClick={() => router.push(\"/signup\")}>\r\n          Daftar di sini\r\n        </Anchor>\r\n      </Text>\r\n\r\n      <Paper withBorder shadow=\"md\" p={30} mt={30} radius=\"md\">\r\n        {loginError && (\r\n          <Alert icon={<IconAlertCircle size=\"1rem\" />} color=\"red\" mb=\"md\">\r\n            {loginError}\r\n          </Alert>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n          <Stack>\r\n            <TextInput\r\n              label=\"Email\"\r\n              placeholder=\"email@example.com\"\r\n              required\r\n              leftSection={<IconMail size=\"1rem\" />}\r\n              {...register(\"email\")}\r\n              error={errors.email?.message}\r\n            />\r\n\r\n            <PasswordInput\r\n              label=\"Password\"\r\n              placeholder=\"Password Anda\"\r\n              required\r\n              leftSection={<IconLock size=\"1rem\" />}\r\n              {...register(\"password\")}\r\n              error={errors.password?.message}\r\n            />\r\n\r\n            <Checkbox label=\"Ingat saya\" {...register(\"rememberMe\")} />\r\n\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              mt=\"xl\"\r\n              loading={loading}\r\n              className=\"btn-primary\"\r\n              size=\"md\"\r\n            >\r\n              Masuk\r\n            </Button>\r\n\r\n            <Text ta=\"center\" mt=\"md\">\r\n              <Anchor size=\"sm\" component=\"button\">\r\n                Lupa password?\r\n              </Anchor>\r\n            </Text>\r\n\r\n            <Text ta=\"center\" mt=\"md\">\r\n              Belum punya akun?{\" \"}\r\n              <Anchor size=\"sm\" onClick={() => router.push(\"/signup\")}>\r\n                Daftar di sini\r\n              </Anchor>\r\n            </Text>\r\n          </Stack>\r\n        </form>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAtBA;;;;;;;;;;AAwBA,MAAM,SAAS,kLAAC,CAAC,MAAM,CAAC;IACtB,OAAO,kLAAC,CAAC,MAAM,GAAG,KAAK,CAAC;QAAE,SAAS;IAAoB;IACvD,UAAU,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;QAAE,SAAS;IAAuB;IAC9D,YAAY,kLAAC,CAAC,OAAO,GAAG,QAAQ;AAClC;AAEe,SAAS;IACtB,qBAAO,8OAAC;;;;;AACV;AAEO,SAAS;IACd,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,IAAA,mIAAO;IAClC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAgB;IAE5D,MAAM,EACJ,QAAQ,EACR,YAAY,EACZ,WAAW,EAAE,MAAM,EAAE,EACtB,GAAG,IAAA,yKAAO,EAA8C;QACvD,UAAU,IAAA,6KAAW,EAAC;QACtB,eAAe;YAAE,OAAO;YAAI,UAAU;YAAI,YAAY;QAAM;IAC9D;IAEA,MAAM,WAAW,OAAO;QACtB,IAAI;YACF,cAAc;YACd,MAAM,SAAS,MAAM,MAAM;YAC3B,IAAI,OAAO,OAAO,EAAE;gBAClB,yDAAyD;gBACzD,MAAM,WAAW,aAAa,OAAO,CAAC;gBACtC,IAAI,aAAa,SAAS;oBACxB,OAAO,IAAI,CAAC;gBACd,OAAO,IAAI,aAAa,cAAc;oBACpC,OAAO,IAAI,CAAC;gBACd,OAAO,IAAI,aAAa,QAAQ;oBAC9B,OAAO,IAAI,CAAC;gBACd,OAAO;oBACL,qCAAqC;oBACrC,OAAO,IAAI,CAAC;gBACd;YACF,OAAO;gBACL,cAAc,OAAO,KAAK,IAAI;YAChC;QACF,EAAE,OAAO,KAAc;YACrB,cAAc,eAAe,QAAQ,IAAI,OAAO,GAAG;QACrD;IACF;IAEA,qBACE,8OAAC,8LAAS;QAAC,MAAM;QAAK,IAAI;;0BACxB,8OAAC,kLAAK;gBAAC,IAAG;gBAAS,WAAU;0BAAgB;;;;;;0BAG7C,8OAAC,+KAAI;gBAAC,GAAE;gBAAS,MAAK;gBAAK,IAAG;gBAAS,IAAI;;oBAAG;oBAC1B;kCAClB,8OAAC,qLAAM;wBAAC,MAAK;wBAAK,SAAS,IAAM,OAAO,IAAI,CAAC;kCAAY;;;;;;;;;;;;0BAK3D,8OAAC,kLAAK;gBAAC,UAAU;gBAAC,QAAO;gBAAK,GAAG;gBAAI,IAAI;gBAAI,QAAO;;oBACjD,4BACC,8OAAC,kLAAK;wBAAC,oBAAM,8OAAC,uPAAe;4BAAC,MAAK;;;;;;wBAAW,OAAM;wBAAM,IAAG;kCAC1D;;;;;;kCAIL,8OAAC;wBAAK,UAAU,aAAa;kCAC3B,cAAA,8OAAC,kLAAK;;8CACJ,8OAAC,8LAAS;oCACR,OAAM;oCACN,aAAY;oCACZ,QAAQ;oCACR,2BAAa,8OAAC,kOAAQ;wCAAC,MAAK;;;;;;oCAC3B,GAAG,SAAS,QAAQ;oCACrB,OAAO,OAAO,KAAK,EAAE;;;;;;8CAGvB,8OAAC,0MAAa;oCACZ,OAAM;oCACN,aAAY;oCACZ,QAAQ;oCACR,2BAAa,8OAAC,kOAAQ;wCAAC,MAAK;;;;;;oCAC3B,GAAG,SAAS,WAAW;oCACxB,OAAO,OAAO,QAAQ,EAAE;;;;;;8CAG1B,8OAAC,2LAAQ;oCAAC,OAAM;oCAAc,GAAG,SAAS,aAAa;;;;;;8CAEvD,8OAAC,qLAAM;oCACL,MAAK;oCACL,SAAS;oCACT,IAAG;oCACH,SAAS;oCACT,WAAU;oCACV,MAAK;8CACN;;;;;;8CAID,8OAAC,+KAAI;oCAAC,IAAG;oCAAS,IAAG;8CACnB,cAAA,8OAAC,qLAAM;wCAAC,MAAK;wCAAK,WAAU;kDAAS;;;;;;;;;;;8CAKvC,8OAAC,+KAAI;oCAAC,IAAG;oCAAS,IAAG;;wCAAK;wCACN;sDAClB,8OAAC,qLAAM;4CAAC,MAAK;4CAAK,SAAS,IAAM,OAAO,IAAI,CAAC;sDAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASvE","debugId":null}}]
}